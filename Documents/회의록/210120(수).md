# [WEEK 2] 0120(수)

## 1.스크럼

  - '요약' 내용은 각 뉴스별 or 스크랩별?
  - 스크랩별이다
  - 태훈: linked list로 처리하면 되지 않을까?
  - 좋은 의견이다.

- A307팀 스크럼에 대한 컨설턴트 님의 조언
    - 최대한 짧게 해라
    - 방금 같은 논의는 따로 시간을 잡아서 얘기해라
    - 모여서 회의한다해도 한 발 떨어져서 어제 한 일의 경과(논의가 더 필요한지, 결정이 난 것인지, 언제까지 결론 내야되는지) 등을 바라보는 시간을 가져라
- 스크럼이란
    - 전날 했던 일
    - 오늘 할 일
    - 고충 및 의견 나누기

## 오전 회의

### 주제 1. 뉴스 데이터 저장

- 뉴스를 스크랩할 때, 매번 CRAWL해서 데이터를 저장할지 아니면 이미 해당 URL이 DB에 있으면 newsno만 받아올 지?
- 의견1. CRAWL후 저장하는 overhead보다는 DB조회하는게 더 나을 것 같다.
- 의견2. DB도 계속 쌓이면 조회하기 어려울 것 같다.
- "매번 Crawl하고 저장하는 overhead" vs "URL이 들어올때마다 DB를 조회하는 overhead"어떤 overhead가 더 클 것인지 생각해보자

### 주제2. hashtag

- 생각해보니 해시태그에 대한 중개테이블(mapping table)이 필요할 것 같다.
- hashtag db 구조 참고  자료

    ![https://media.vlpt.us/post-images/juna-dev/ca05b820-2de3-11ea-977f-259819423d02/%EB%B6%84%EB%A6%AC.PNG](https://media.vlpt.us/post-images/juna-dev/ca05b820-2de3-11ea-977f-259819423d02/%EB%B6%84%EB%A6%AC.PNG)

    [해시태그 구현하기](https://velog.io/@juna-dev/%ED%95%B4%EC%8B%9C%ED%83%9C%EA%B7%B8-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-9ak4xocihh)

### 주제3. 회원 삭제 시 시나리오 - user가 삭제될 때 user_board까지는 삭제 됨. user_board_comment는 어떻게 할지?

- 의견1. user_board_comment는 그냥 놔두자(현 구조 유지)(성국)
- 의견2. 구조를 새롭게 짜야 하지 않을까?(태훈)
- 의견3. 그렇다면 user 삭제할 때 follow table에서도 지워줘야 하므로 follow table도 user table과 연결 지어야 한다.

## 오후 미팅

### 1. user_board, user_board_post, user_board_comment 재정의

- 태훈님이 새로 구성한 게시판 구조로 다시 정의
(유저가 삭제되면 해당 유저의 게시판 및 다른 유저의 게시판에 쓴 글까지 지워질 수 있도록 변경)

    ![%5BWEEK%202%5D%20DAY3%200120(%E1%84%89%E1%85%AE)%201c69acb9f08e4ebebdbf165e976879a3/__.jpg](%5BWEEK%202%5D%20DAY3%200120(%E1%84%89%E1%85%AE)%201c69acb9f08e4ebebdbf165e976879a3/__.jpg)

### 2. follower, following 테이블 재정의(미완...)

- 해당 테이블도 유저가 삭제될 때 해당 유저가 팔로우한 유저 목록 및 
다른 유저가 해당 유저를 팔로우한 기록도 같이 삭제될 수 있도록 수정(목표)
    - 유저 테이블에서 외래키를 두번 받자(erd cloud의 한계?)
    - 차라리 팔로우 테이블, 팔로잉 테이블 둘로 나누자

        ![%5BWEEK%202%5D%20DAY3%200120(%E1%84%89%E1%85%AE)%201c69acb9f08e4ebebdbf165e976879a3/_ERD.jpg](%5BWEEK%202%5D%20DAY3%200120(%E1%84%89%E1%85%AE)%201c69acb9f08e4ebebdbf165e976879a3/_ERD.jpg)

    - 코북의 erd를 참고해봐요

### 3. JIRA 다시 등록

- 큰 주제를 에픽으로 재설정
- 에픽 하위에 업무 설정
- 앞으로 프로젝트 진행하면서 스프린트 설정 및 서브 태스크 업데이트 예정
- 스토리와 업무(Task)의 차이
    - 스토리는 유저 스토리 라고 해요
    고객의 이야기를 주욱 담아두는 거에요
    개발자는 거기서 개발작업 요소를 체크해서 작업으로 뽑아내는 것 (고객의 니즈)
    - 업무는 개발자가 개발할 요소
    - 시간이 지나면서 조금씩 와전 되는 부분이 있더라구요
    개발하는 입장에서 그 차이가 중요하지 않다라는게 제생각이에요

### 4. Git Commit Covention

- [S04P12A307-43] feat/Boards : Create Login form 
- 기본(오리지날)에 충실하자(성국님) 기초를 먼저 다져야 나중에 변형을 해도 괜찮다
- [S04P12A307-43][ADD] feat/Boards : Create Login form - 우리가 한눈에 알아보기 쉽게 사용하자 (태훈님)

- [S04P12A307-43][ADD] : Create Login form 
- 두번 쓰는 느낌이 있어도 뒤에는 디테일 앞은 심플(한번에 알아보기)하게 (창민님)

## 간단한 과제

1. 깃 컨벤션 공부
2. 김재성님 : 회원
김재승님 : 마이페이지
백태훈님 : 검색, 게시판
조성국님 : 기사
- git convention
천창민님 : 메인페이지
⇒ 어떤 데이터가 움직이는지 고민

- 성국 git convention

    ```markdown
    형식
    <type>[optional scope]: <description>
    [optional body]
    [optional footer(s)]

    1. Commit message with description
    예)
    [이슈번호1] feat: Create Login.vue login form
    create email field and password field 8~16 character with number
    footer
    [이슈번호2] docs: Edit README.md subtitle-2

    2. Commit message with ! to draw attention to breaking change
    예)

    [이슈번호3] refactor!: Create Login.vue login form
    body blah blah blah blah
    footer

    3. Commit message with scope
    feat(lang): add polish language
    ```

[[성국]기사 part](%5BWEEK%202%5D%20DAY3%200120(%E1%84%89%E1%85%AE)%201c69acb9f08e4ebebdbf165e976879a3/%5B%E1%84%89%E1%85%A5%E1%86%BC%E1%84%80%E1%85%AE%E1%86%A8%5D%E1%84%80%E1%85%B5%E1%84%89%E1%85%A1%20part%202d4388bef688450895c289238a42e583.md)

---

2021.01.20 수요일 23:30 끝 !

- 재승 git convention

    ```
    git commit convention을 공부해야 하는 이유
    협업을 위해 ! 팀원들과 커밋 메세지 스타일을 정해두면 코드리뷰, 가독성, 유지보수가 좋아진다 !
    한마디로 필수 !

    1. commit message structure 커밋 메시지 구조

    기본적으로 커밋 메시지는 아래와 같이 제목/본문/꼬리말 로 구성된다.

    type : subject

    body

    footer

    2. commit type 커밋 타입

    feat: 새로운 기능 추가
    fix: 버그 수정
    docs: 문서 수정
    style: 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
    refactor: 코드 리펙토링
    test: 테스트 코드, 리펙토링 테스트 코드 추가
    chore: 빌드 업무 수정, 패키지 매니저 수정

    3. subject 제목

    //타이틀 예시
    feat: Summarize changes in around 50 characters or less

    제목은 50자를 넘기지 않고, 대문자로 작성하고 마침표를 붙이지 않는다.

    과거시제를 사용하지 않고 명령어로 작성한다.
    "Fixed" -> "Fix"
    "Added" -> "Add"

    4. body

    선택사항이기 때문에 모든 커밋에 본문내용을 작성할 필요는 없다.

    부연설명이 필요하거나 커밋의 이유를 설명할 경우 작성해준다.

    72자를 넘기지 않고 제목과 구분되기 위해 한칸을 띄워 작성한다.

    5. footer

    선택사항이기 때문에 모든 커밋에 꼬리말을 작성할 필요는 없다.

    issue tracker id를 작성할 때 사용한다.

    6. example

    [S04P12A307-33] feat: 상세페이지 ThumbnailList 컴포넌트에 무한 스크롤 추가

    2021.01.20 천창민님의 기획 요구사항 변경으로 인해 상세페이지 
    ThumbnailList 컴포넌트 기능 변경
    모바일 버전에서 페이지네이션 방식에서 무한 스크롤 방식으로 기능 변경
     - vue-infinitet-scroll@2.3.0 라이브러리 추가

    Resolves: #S04P12A307-33
    ```

- [재승] 마이페이지 part

    ```
    마이페이지 

    1. 내 정보 수정/탈퇴

    프론트
    	수정
    	$axios
    	method put
    	name, password, thumbnail_path
    	
    	
    	탈퇴
    	$axios
    	method delete
    	id

    백
    	수정
    	RequestMethod post
    	request / name, password, thumbnail_path 받아서 service에 넘겨주고
    	session 끊고 로그인페이지로 redirect

    	탈퇴
    	RequestMethod delete
    	id받고 service에 넘겨주고
    	session 끊고 로그인페이지로 redirect

    2. 내가 구독한 큐레이터
    	
    백
    	service.followcuratorlist();
    	
    	****팔로우중인 모든 큐레이터 id, thumbnail_path를 json형식으로 
    	바꿔서 list에 담아 get방식으로 보낸다
    	
    프론트
    	받아서 가공해서 쓴다

    3. 스크랩한 기사 ( 기사 저장 )

    백
    	service.usergoodnewslist();
    	유저가 좋아요를 누른 기사들의 newsno를 모두 받아와서 받아온 newsno로
    	list<NewsVO> usn = service.Newslist(받아온newsno);
    	뉴스 데이터를 모두 가져와서 필요한 정보만 get방식 json형식으로 list에 담아 넘겨줍니다. 
    	(마이페이지에서는 기사 제목, 이미지링크정도 ?) title, image_path정도만

    프론트
    	title, image_path 받아서 가공해서 쓴다
    	

    4. 게시판 ( 커뮤니티 )

    백
    	세션에 저장되어있는 회원 id를 가지고 게시판의 정보를 가져온다
    	service.userboardpostlist(id);
    	게시글의 title, content, data, visitcnt, isnotice를 json형식으로 list에 담아 넘긴다.

    프론트
    	받아서 쓴다.

    끝 !
    ```

---

재성 0120 팀과제

- 재성 git convention

    유다시티의 커밋 메시지 스타일이 국룰인듯함.

    [Udacity Nanodegree Style Guide](https://udacity.github.io/git-styleguide/)

    [Conventional Commits](https://www.conventionalcommits.org/ko/v1.0.0/)

    **1. Commit Message Structure**

    ```
    type : subject

    body

    footer
    ```

    **2. Commit Type**

    - feat : 새로운 기능 추가
    - fix : 버그 수정
    - docs : 문서 수정
    - style : 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
    - refactor : 코드 리펙토링
    - test : 테스트 코드, 리펙토링 테스트 코드 추가
    - chore : 빌드 업무 수정, 패키지 매니저 수정

    **3. Subject**

    - 제목은 50자를 넘기지 않고, 대문자로 작성하고 마침표를 붙이지 않는다.
    - 과거시제를 사용하지 않고 명령어로 작성한다.
        - "Fixed" --> "Fix"
        - "Added" --> "Add"

    **4. Body**

    - 선택사항이기 때문에 모든 커밋에 본문내용을 작성할 필요는 없다.
    - 부연설명이 필요하거나 커밋의 이유를 설명할 경우 작성해준다.
    - 72자를 넘기지 않고 제목과 구분되기 위해 한칸을 띄워 작성한다.

    **5. footer**

    - 선택사항이기 때문에 모든 커밋에 꼬리말을 작성할 필요는 없다.
    - issue tracker id를 작성할 때 사용한다.
- [재성] 회원 part
    1. 로그인/로그아웃

        이메일과 비밀번호 양식에 맞을때만 로그인 버튼이 활성화된다.(EX 특수문자포함8자리같은거)

        입력양식에 맞지 않을경우 input마다 warning 메세지가 하단에 출력된다.

        이메일과 비밀번호를 전송하고 인증토큰을 받는다.

        인증 토큰은 로컬 저장소에 저장해두고 로그아웃시 이를 제거한다.

        로그인 요청

        - request data
            - user_id, user_password
        - response data
            - auth_token

        로그아웃

        - auth_token 삭제

    2. 회원가입

        로그인과 마찬가지로 이메일과 비밀번호, 유저네임이 양식에 맞을때만 가입버튼 활성화

        각 input마다 warning 메세지가 하단에 출력된다.

        가입에 성공하면 상태코드 200 반환 그 외 가입실패

    - request data
        - user_id, user_password, user_name
    - response data
        - http 상태코드

    3.   회원정보수정

    회원 정보 수정 첫 페이지에서 비밀번호 입력. 

    성공시 비밀번호, 유저네임, 썸네일이 수정가능한 페이지로 넘어감

    - request data
        - user_password
    - response data
        - http 상태코드

    유저네임, 썸네일은 기존에 갖고있던 값이 default로 되어있다.

    비밀번호와 유저네임이 양식에 맞을 때 수정 버튼 활성화된다.

    - request data
        - user_password, user_name
    - response data
        - http 상태코드

    4.   회원탈퇴

    회원탈퇴 버튼을 누르면 auth_token이 유효한지 확인한 뒤 삭제를 진행

    - request data
        - auth_token
    - response data
        - http 상태코드

    5.   아이디/비밀번호찾기

    아이디를 찾으려면 보통은 주민번호나 휴대폰인증인데 그 외에는 생각이 안나요

    비밀번호찾기는 유저 이메일로 인증번호나 링크를 주는 방식을 생각함

    - request data
        - user_id
    - response data
        - http 상태코드

창민 0120 팀과제

- 창민 git convention

    Type(제목에 포함되는 유형)

    - feat: 새로운 feature
    - fix: 버그 등 수정
    - docs: 문서 내용 변경
    - style: 포맷, 세미콜론 수정 등 코드가 아닌 스타일에 관련된 수정
    - refactor: 리팩토링 코드
    - test: 테스트 코드 추가 및 리팩토링 테스트 등
    - chore: build task 수정, 프로젝트 매니저 설정 수정 등
    1. Subject
    - 제목은 50자 이내(영문 기준)
    - 대문자 시작
    - 끝날 때 마침표 X
    - 의무적 어조로 작성
    1. Body
    - 일반적으로 제목까지만 기재
    - 약간의 설명 or 전체 문맥을 설명해야 할 때만 사용
    - 커밋에 대해 무엇 그리고 이유에 설명
    - subject와 구분되기 위해 한칸을 띄워 작성
    - Body은 영문 기준 72자마다 줄 바꿈
    - 선택사항
    1. Footer
    - 이슈 트랙킹을 위해 ID 등을 참조할 때 사용
    - 선택사항

    [타입(Type)] 제목(Title)
    본문(Body)
    꼬리말(Footer)

    타입 : 제목

    본문
    꼬리말

    type : subject

    body

    footer

    <type> [optional scope] : <description>

    [optional body]

    [optional footer(s)]

- [창민] 메인페이지 part

    1. 데이터 리뷰(메인 페이지)

    메인 페이지 (가장 기본)
    - created 상태에서 호출하는 것이 좋을 듯

    - 큐레이터
        - input : 유저 아이디
        - 큐레이터 GET 요청
        - request data
        ▶ id
        - response data
        ▶ following
        - select following
        from follow
        where follower = #{id};
    - 추천 기사(유저와 같은 관심사(해시태그))
        - input : 유저 아이디
        - 추천기사 GET 요청
        - request data
        ▶ id
        - response data
        ▶newsno, title, content, image_path, url
        - select n.newsno, n.title, n.content, n.image_path, n.url, [s.no](http://s.no/)
        from news n join user_scrap_news s
        on n.newsno = s.newsno
        where [s.no](http://s.no/) = ANY(select [t.no](http://t.no/)
        from post_tag t join hashtag h
        on t.tagid = h.tagid
        where [h.name](http://h.name/) = ANY(select [j.name](http://j.name/)
        from user u join join_tag j
        on [u.id](http://u.id/) = [j.id](http://j.id/)
        where [u.id](http://u.id/) = #{id}
        )
        )
        order by s.date desc limit 5;
        - 만약 중복 제거하고 싶다면
        select max(n.newsno), max(n.title), max(n.content), max(n.image_path), n.url
        from newsno n join user_scrap_news s
        on n.newsno = s.newsno
        where [s.no](http://s.no/) = ANY(select [t.no](http://t.no/)
        from post_tag t join hashtag h
        on t.tagid = h.tagid
        where [h.name](http://h.name/) = ANY(select [j.name](http://j.name/)
        from user u join join_tag j
        on [u.id](http://u.id/) = [j.id](http://j.id/)
        where [u.id](http://u.id/) = #{id}
        )
        )
        group by n.url
        order by s.date desc limit 5;

    큐레이터 클릭시

    - 해당 큐레이터의 최신 스크랩 기사
        - input : 큐레이터 아이디
        - 큐레이터의 최신기사 GET 요청
        - request data
        ▶ following_id
        - response data
        ▶ newsno, title, content, image_path, url
        ▶ summary, date, good_count, visitcnt, hate_count(추후)
        - select newsno, title, content, image_path, url
        from news
        where newsno = ANY(select newsno
        from user_scrap_news
        where postno = (select postno
        from user_scrap_news
        where date = (select max(date)
        from user_scrap_news
        where id = #{id})));

    추천 기사를 보여줄 때 각자 요약문에 맞게 같은 기사를 여러번 보여준다

    - 기사 클릭시, 이미 기사의 데이터를 가지고 있기에 프론트에서 꾸며서 보여준다.
    - 요약문으로 이동시,
        - input : summary_no
        - 요약문 GET 요청
        - request data
        ▶summary_no
        - response data
        ▶ summary, date, good_count, visitcnt, hate_count
        - select summary, date, good_count, visitcnt, hate_count
        from user_scrap_news
        where no = #{summary_no};

    추천 기사를 보여줄 때 하나의 기사에 여러 요약문을 보여준다

    - 기사 클릭시, 이미 기사의 데이터를 가지고 있기에 프론트에서 꾸며서 보여준다.
    - 요약문으로 이동시,
        - input : newsno
        - 요약문 GET 요청
        - request data
        ▶newsno
        - response data
        ▶ summary, date, good_count, visitcnt, hate_count
        - select summary, date, good_count, visitcnt, hate_count
        from user_scrap_news
        where newsno = #{newsno};

- 태훈 git commit

    ```markdown
    // 여기에 적어주세요
    [이슈번호][말머리] 행위/대상(에픽) : 디테일

    [S---1][ADD] feat/로그인 : Create 로그인 폼 추가/수정/삭제
    기준!

    말머리 : ADD/UPDATE/DELETE

    행위
    - feat : 새로운 기능 추가
    - fix : 버그 수정
    - docs : 문서 수정
    - style : 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우
    - refactor : 코드 리펙토링
    - test : 테스트 코드, 리펙토링 테스트 코드 추가
    - chore : 빌드 업무 수정, 패키지 매니저 수정 

    두개 섞였을경우 제일 큰 비중을 적고 설명에다가 나머지 명세하기
    가능하면 하나씩 하고 커밋하도록 하기

    ```

---